<form name="filterForm.form" ng-submit="filterForm.submit()" novalidate class="bknd-filter-form">
  <button class="btn btn-success" ladda="filterForm.loadingFilterResults" data-style="expand-right">Filter</button>
  <br/><br/>

  <div class="form-group">
    <fieldset>
      <div class="form-group form-inline" ng-repeat="predicate in filterForm.query track by $index">

        <!-- Select field to filter by -->

        <span class="ui-select" ng-hide="predicate.field">
          <select class="form-control"
                  ng-model="predicate.field"
                  ng-options="field.name for field in filterForm.fields"
                  ng-change="filterForm.onFieldSelected(predicate)"></select>
        </span>

        <!-- Field is selected - select operator and value -->

        <span ng-show="predicate.field">
          <label class="form-group" ng-bind="predicate.field.name"></label>

          <!-- Operator -->

          <span class="ui-select">
            <select class="form-control"
                    ng-model="predicate.operator"
                    ng-options="operator for operator in filterForm.operators[predicate.field.type]"></select>
          </span>
          <!--<span ng-show="filterForm.operators[predicate.field.type].length === 1">-->
            <!--{{ filterForm.operators[predicate.field.type][0] }}-->
          <!--</span>-->

          <!-- Value -->

          <span ng-hide="['empty', 'notEmpty'].indexOf(predicate.operator) !== -1" ng-switch on="predicate.field.type">

            <input ng-switch-when="Boolean" type="checkbox"
                   class="form-control"
                   name="predicate.key"
                   ng-model="predicate.value"/>

            <span ng-switch-when="DateTime" class="filter-form-date">
              <span class="input-group">
                <span class="input-group-addon ti-calendar"></span>
                <input type="date"
                       class="editable-has-buttons editable-input form-control"
                       ng-model="predicate.value"/>
              </span>
              <span class="input-group">
                <span class="input-group-addon ti-time"></span>
                <input type="time"
                       class="editable-has-buttons editable-input form-control"
                       ng-model="predicate.value"/>
              </span>
            </span>

            <span ng-switch-when="select" class="input-group">
              <!--<div bknd-single-select-typeahead item="predicate" field="predicate.field"></div>-->
              <span class="input-group-addon ti-text"></span>
              <input type="text"
                     class="form-control"
                     ng-model="predicate.value"/>
            </span>

            <span ng-switch-when="Numeric" class="input-group">
              <span class="input-group-addon" style="min-width: 39px">0</span>
              <input type="text"
                     class="form-control"
                     name="predicate.key"
                     ng-model="predicate.value"/>
            </span>

            <span ng-switch-default class="input-group">
              <span class="input-group-addon ti-text"></span>
              <input type="text"
                     class="form-control"
                     ng-model="predicate.value"/>
            </span>
            </span>


          <!-- AND -->

          <!--<span ng-show="!$last">AND</span>-->
        </span>

        <i ng-show="predicate.field" class="fa fa-close" ng-click="filterForm.removePredicate(predicate)"></i>

        <div ng-show="$last && predicate.operator && filterForm.fields.length > 0">
          <br/>
          <input type="button"
                 class="btn btn-primary btn-sm"
                 ng-click="filterForm.addRow()" value="+ ADD CONDITION">
          </input>
        </div>
      </div>
    </fieldset>


  </div>
</form>
