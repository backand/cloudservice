<div ng-controller="RulesController as rules">

  <div id="rules-header" class="page-header clearfix">

    <h2>Rules</h2>

    <p class="lead pull-left">short description of what rules are and how to use them</p>

    <button ng-click="rules.open()"
            id="new-rule-btn"
            class="btn btn-lg btn-success pull-right">
      + new rule
    </button>
  </div>


  <ul id="rules" class="list-unstyled">

    <li ng-repeat="item in rules.items">

      <h3 class="rule-group-title">{{ item.title | uppercase}}</h3>

      <div class="pull-right" ng-click="item.visible = !item.visible">
        <i ng-class="{'ti-arrow-up' : item.visible, 'ti-arrow-down' : !item.visible}"></i>
      </div>

      <p class="rule-group-description">These rules fires on {{ item.title }} action</p>

      <ul class="rules-sub-items-list"
          ng-show="item.visible">

        <li ng-repeat="subitem in item.items">

          <h4 class="rule-sub-title"
              ng-click="subitem.visible = !subitem.visible">{{subitem.title}}</h4>

          <div class="pull-right" ng-click="subitem.visible = !subitem.visible">
            <i ng-class="{'ti-arrow-up' : subitem.visible, 'ti-arrow-down' : !subitem.visible   }"></i></div>

          <p class="rule-sub-description">
            These rules fire {{ subitem.title }} an object is created
          </p>

          <ul class="rules-names-list" ng-show="subitem.visible">

            <li ng-repeat="rule in subitem.items">

              <h5 class="rule-name text-primary"
                  ng-click="rules.edit(rule.name)">
                {{rule.name}}</h5>

              <p class="rule-description">
                some description about the action should be here
              </p>
            </li>

            <li class="add-new-rule text-primary" ng-click="rules.open()">Add new rule</li>

          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div>


