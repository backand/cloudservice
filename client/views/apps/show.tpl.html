<div class="page">
  <alert type="danger" close="show.setAlertStatus()" ng-show="show.alertMsg != ''"><div ng-bind-html="show.alertMsg"></div></alert>
  <div class="panel panel-default dashboard">
    <div class="panel-heading"><strong>Dashboard</strong></div>
    <div class="panel-body">
      <div class="row col-md-10 col-sm-offset-1">

        <div class="list-unstyled row">
          <ul class="list-inline text-center stats" >
              <li class="col-md-3">
                <h1>{{show.statisticsArray['last24hours'] | number:0}}</h1>
                <p class="text-muted size-h5">Requests in the last 24h</p>
              </li>
              <li class="col-md-3">
                  <h1>{{show.statisticsArray['diffLastDaytoYesterday'] == null ? 0 : show.statisticsArray['diffLastDaytoYesterday'] | number:0}}%</h1>
                  <p class="text-muted size-h5">Change in the last 24h</p>
              </li>
              <li class="col-md-3">
                  <h1>{{show.statisticsArray['last30days'] | number:0}}</h1>
                  <p class="text-muted size-h5">Requests in the last 30d</p>
              </li>
              <li class="col-md-3">
                  <h1>{{show.statisticsArray['diffLast30DaysToPrev'] == null ? 0 : show.statisticsArray['diffLast30DaysToPrev'] | number:0 }}%</h1>
                  <p class="text-muted size-h5">Change in the last 30d</p>
              </li>
              <!--<li class="col-md-2">-->
                  <!--<h1>{{show.statisticsArray['sizeInMb']==null ? 0:show.statisticsArray['sizeInMb'] | number:0}}MB</h1>-->
                  <!--<p class="text-muted size-h5">Database Size</p>-->
              <!--</li>-->
          </ul>
        </div>

        <div ng-repeat="(objectName, object) in show.objects" class="row dashboard-row">
          <div class="object-title"><span class="object-title">{{objectName}}</span></div>
          <div class="col-md-2 object-stat-field" ng-click="show.goToObjectPage(objectName, object.id, 'object_fields')">
            <span class="object-stat-title">Records:</span>
            {{object.records}}
          </div>
          <div class="col-md-2 object-stat-field" ng-click="show.goToObjectPage(objectName, object.id, 'object_actions')">
            <span class="object-stat-title">Actions:</span>
            {{object.actions}}
          </div>
          <div class="col-md-3 object-stat-field" ng-click="show.goToObjectPage(objectName, object.id, 'object_security')">
            <span class="object-stat-title">Authorization Security:</span>
            {{object.isAuthSecurityOverridden ? 'OVERRIDDEN' : 'INHERITED'}}
          </div>
          <div class="col-md-2 object-stat-field">
            <span class="object-stat-title">Data Security:</span>
            {{object.isDataSecurityEnabled ? 'ENABLED' : 'DISABLED'}}
          </div>
          <div class="col-md-3 object-stat-field">
            <span class="object-stat-title">Related Objects:</span>
            <span ng-repeat="relatedObject in object.relatedObjects">
              <a>{{relatedObject + ($last ? '' : ',')}}</a>
            </span>
          </div>
        </div>

        <div class="divider divider-solid"></div>

        <div class="row">
          <div class="col-md-5 col-sm-6">
            <div log-list app-name="{{appName}}" log-limit="10"></div>
          </div>

          <div class="col-md-1 col-sm-0">
            <div class="vertical-border" style="height:400px;"></div>
          </div>

          <div class="col-md-6 col-sm-6">
            <div class="app-log">
              <h4 class="">TOOLS AND KNOWLEDGE BASE</h4>

              <section ui-sref="json_model({name: show.appName})" class="data-panel" ng-if="show.currentApp.connectionSource === 'local'">
                <div class="panel-icon">
                  <i class="icon-rest-api-icon text-huge"></i>
                </div>
                <div class="panel-data">
                  <h4>Data Model</h4>
                  <p>Manage your data model by adding new objects</p>
                </div>
              </section>

              <section ui-sref="tables.notables({name: show.appName})" class="data-panel" ng-if="show.currentApp.connectionSource !== 'local'">
                <div class="panel-icon">
                  <i class="icon-rest-api-icon text-huge"></i>
                </div>
                <div class="panel-data">
                  <h4>Sync Database</h4>
                  <p>Synchronize database's schema changes with Backand's ORM</p>
                </div>
              </section>

              <section ui-sref="docs.api-desc({name: show.appName})" class="data-panel data-panel-success">
                  <div class="panel-icon">
                      <i class="icon-orm-icon text-huge"></i>
                  </div>
                  <div class="panel-data">
                      <h4>Documentation</h4>
                      <p>Review Backand's documentation</p>
                  </div>
              </section>

              <section  class="data-panel" ui-sref="database.show({name: show.appName})">
                  <div class="panel-icon">
                      <i class="icon-databsase-icon text-huge"></i>
                  </div>
                  <div class="panel-data">
                      <h4>Database</h4>
                      <p>Manage your database connection</p>
                  </div>
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
